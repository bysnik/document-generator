<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>–ü–∞–∫–µ—Ç–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 20px auto; padding: 20px; }
        .form-container { background: white; padding: 40px; border-radius: 10px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); text-align: center; }
        h1 { color: #28a745; margin-bottom: 30px; }
        .upload-area { border: 3px dashed #28a745; padding: 60px; border-radius: 10px; background: #f8fff8; margin: 30px 0; cursor: pointer; }
        .upload-area p { color: #666; font-size: 18px; margin: 0; }
        .upload-area:hover { background: #f0fff0; border-color: #218838; }
        .file-info { background: #e7f3ff; padding: 20px; border-radius: 8px; margin: 20px 0; text-align: left; display: none; }
        .file-info h3 { margin: 0 0 10px 0; color: #0066cc; }
        .file-info p { margin: 5px 0; font-size: 14px; }
        .btn-change { color: #dc3545; text-decoration: underline; cursor: pointer; font-size: 14px; background: none; border: none; padding: 0; }
        .btn-change:hover { color: #c82333; }
        .btn-upload { display: inline-block; padding: 15px 40px; background: #28a745; color: white; border-radius: 6px; font-size: 18px; cursor: pointer; margin-top: 20px; border: none; }
        .btn-upload:hover { background: #218838; }
        .btn-generate { display: inline-block; padding: 15px 40px; background: #0066cc; color: white; border-radius: 6px; font-size: 18px; cursor: pointer; width: 100%; margin-top: 10px; border: none; }
        .btn-generate:hover { background: #0052a3; }
        .btn-generate:disabled { background: #ccc; cursor: not-allowed; }
        .back { display: inline-block; margin-bottom: 20px; color: #0066cc; text-decoration: none; }
        .requirements { background: #f8f9fa; padding: 20px; border-radius: 8px; margin-top: 30px; text-align: left; font-size: 14px; }
        .requirements h3 { margin-top: 0; color: #555; }
        .hidden { display: none; }
    </style>
</head>
<body>
    <a href="/" class="back">‚Üê –ù–∞–∑–∞–¥ –∫ –≤—ã–±–æ—Ä—É —Ä–µ–∂–∏–º–∞</a>
    <div class="form-container">
        <h1>üìÅ –ü–∞–∫–µ—Ç–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</h1>

        <form method="POST" action="/batch" enctype="multipart/form-data" id="upload-form">
            <!-- –û–±–ª–∞—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏ (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->
            <div class="upload-area" id="upload-area">
                <p>üìÅ –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ CSV –∏–ª–∏ XLSX —Ñ–∞–π–ª —Å—é–¥–∞</p>
                <p style="font-size:14px; color:#888; margin-top:10px;">–ò–ª–∏</p>
                <button type="button" class="btn-upload" id="select-file-btn">–í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª</button>
                <input type="file" id="file-input" name="file" accept=".csv,.xlsx,.xls" style="display:none;">
            </div>

            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–º —Ñ–∞–π–ª–µ (—Å–∫—Ä—ã—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->
            <div class="file-info" id="file-info">
                <h3>‚úÖ –§–∞–π–ª –∑–∞–≥—Ä—É–∂–µ–Ω</h3>
                <p><strong>–ù–∞–∑–≤–∞–Ω–∏–µ:</strong> <span id="file-name">-</span></p>
                <p><strong>–†–∞–∑–º–µ—Ä:</strong> <span id="file-size">-</span></p>
                <p><strong>–§–æ—Ä–º–∞—Ç:</strong> <span id="file-type">-</span></p>
                <button type="button" class="btn-change" id="change-file-btn">–ó–∞–≥—Ä—É–∑–∏—Ç—å –¥—Ä—É–≥—É—é —Ç–∞–±–ª–∏—Ü—É</button>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ -->
            <button type="submit" class="btn-generate" id="generate-btn" disabled>
                üöÄ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∞–∫–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
            </button>
        </form>

        <div class="requirements">
            <h3>üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ñ–∞–π–ª—É:</h3>
            <ul>
                <li>–ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ ‚Äî –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∫–æ–ª–æ–Ω–æ–∫ (–¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ –ø–æ–ª–µ–π)</li>
                <li>–ö–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ = –æ–¥–∏–Ω –¥–æ–∫—É–º–µ–Ω—Ç</li>
                <li>–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ñ–æ—Ä–º–∞—Ç—ã: <strong>.csv</strong>, <strong>.xlsx</strong>, <strong>.xls</strong></li>
                <li><a href="/example-csv" style="color:#0066cc;">–°–∫–∞—á–∞—Ç—å —à–∞–±–ª–æ–Ω CSV</a> | <a href="/example-xlsx" style="color:#0066cc;">–°–∫–∞—á–∞—Ç—å —à–∞–±–ª–æ–Ω XLSX</a></li>
            </ul>
        </div>
    </div>

    <script>
        const fileInput = document.getElementById('file-input');
        const uploadArea = document.getElementById('upload-area');
        const fileInfo = document.getElementById('file-info');
        const fileName = document.getElementById('file-name');
        const fileSize = document.getElementById('file-size');
        const fileType = document.getElementById('file-type');
        const generateBtn = document.getElementById('generate-btn');
        const changeFileBtn = document.getElementById('change-file-btn');

        // –ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ "–í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª"
        document.getElementById('select-file-btn').addEventListener('click', () => {
            fileInput.click();
        });

        // –ö–ª–∏–∫ –ø–æ –æ–±–ª–∞—Å—Ç–∏ –∑–∞–≥—Ä—É–∑–∫–∏
        uploadArea.addEventListener('click', () => {
            fileInput.click();
        });

        // –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.style.borderColor = '#218838';
            uploadArea.style.backgroundColor = '#f0fff0';
        });

        uploadArea.addEventListener('dragleave', () => {
            uploadArea.style.borderColor = '#28a745';
            uploadArea.style.backgroundColor = '#f8fff8';
        });

        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.style.borderColor = '#28a745';
            uploadArea.style.backgroundColor = '#f8fff8';
            
            if (e.dataTransfer.files.length) {
                fileInput.files = e.dataTransfer.files;
                handleFileSelect();
            }
        });

        // –í—ã–±–æ—Ä —Ñ–∞–π–ª–∞
        fileInput.addEventListener('change', handleFileSelect);

        function handleFileSelect() {
            if (fileInput.files.length > 0) {
                const file = fileInput.files[0];
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ñ–∞–π–ª–µ
                fileName.textContent = file.name;
                fileSize.textContent = formatFileSize(file.size);
                fileType.textContent = getFileExtension(file.name);
                
                // –°–∫—Ä—ã–≤–∞–µ–º –æ–±–ª–∞—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
                uploadArea.classList.add('hidden');
                fileInfo.style.display = 'block';
                
                // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
                generateBtn.disabled = false;
            }
        }

        // –ö–Ω–æ–ø–∫–∞ "–ó–∞–≥—Ä—É–∑–∏—Ç—å –¥—Ä—É–≥—É—é —Ç–∞–±–ª–∏—Ü—É"
        changeFileBtn.addEventListener('click', () => {
            // –û—á–∏—â–∞–µ–º –∏–Ω–ø—É—Ç
            fileInput.value = '';
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–±–ª–∞—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏, —Å–∫—Ä—ã–≤–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
            uploadArea.classList.remove('hidden');
            fileInfo.style.display = 'none';
            
            // –î–µ–∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
            generateBtn.disabled = true;
        });

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function formatFileSize(bytes) {
            if (bytes < 1024) return bytes + ' –±–∞–π—Ç';
            else if (bytes < 1048576) return (bytes / 1024).toFixed(1) + ' –ö–ë';
            else return (bytes / 1048576).toFixed(1) + ' –ú–ë';
        }

        function getFileExtension(filename) {
            return filename.split('.').pop().toUpperCase();
        }
    </script>
</body>
</html>